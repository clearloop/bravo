
### 第五章 钱包

比特币钱包分为非确定性钱包和确定性钱包，非确定性钱包中每个密钥都是从随机数独立生成的，确定性钱包所以密钥都是从主密钥派生而来的。  

> 钱包控制用户访问权限，管理密钥和地址，跟踪余额以及创建和签名交易。狭义上，即从程序员的角度来看，“钱包”是指用于存储和管理用户密钥的数据结构。比特币钱包只含密钥，是密钥链。

**非确定性钱包。**比特币核心客户端预先生成100个随机私钥，从最开始就生成足够多的私钥并且每个密钥只使用一次。

![randomWallt](/assets/randomWallet.png)

> 这种钱包现在正在被确定性钱包替换，因为它们难以管理、 备份以及导入。随机密钥的缺点就是如果你生成很多私钥，你必须保存它们所有的副本。这就意味着这个钱包必须被经常性 地备份。每一个密钥都必须备份，否则一旦钱包不可访问时，钱包所控制的资金就付之东流。

**确定性钱包。**确定性，或者“种子”钱包包含通过使用单项离散函数而可从公共的种子生成的私钥。种子是随机生成的数字。

![certainWallt](/assets/certainWallet.png)

> 在确定性钱包中，种子足够恢复所有的已经产生的私钥，所以只用在初始创建时的一个简单备份就足以搞定。并且种子也足够让钱包导入或者导出。这就很容易允许使用者的私钥在钱包之间轻松转移。

**分层确定性钱包。**确定性钱包被开发成更容易从单个“种子”中生成许多密钥。确定性钱包的最高级形式是通过BIP0032标准定义的HD钱包。HD钱包包含以树状结构衍生的密钥，使得父密钥可以衍生一系列子密钥，每个子密钥又可以衍生出一系列孙密钥，以此类推，无限衍生。

![hdWallet](/assets/hdWallet.png)

> 相比较随机（不确定性）密钥，HD钱包有两个主要的优势。  
> 第一，树状结构可以被用来表达额外的组织含义。  
> 第二，它可以允许让使用者去建立一个公共密钥的序列而不需要访问相对应的私钥。

<style>img{ padding: 5rem 10vw }</style>
