
## 第二章 比特币的原理

### 创建交易输出
比特币支付二维码包含(地址 金额 标签 信息)，常见的交易形式有(找零 兑整 分发)。
>与一个简单包含目的比特币地址的二维码不同，当前支付请求的是一个二维编码过的URL，它包含有一个目的地址，一笔支付金额，和一个像“Bob咖啡”这样的交易描述。这使比特币钱包应用在发送支付请求时，可以预先填好支付用的特定信息，给用户显示一种友好易懂的描述。你可以用比特币钱包应用扫描这个二维码来看Alice可能看到的信息

未消费交易输出, BitCoin 钱包由一个个地址构成，每次发送交易都会产生一个新的地址。
```lisp
;; 交易包含 一个或多个(输入 输出) 与 所有权证明
(defconstant `Atransaction 
    ((+ input[@]) (+ output[@]) (fowner towner)))

;; 输出小于输入时产生矿工费
(defun gas (i o)
    (if(> o i)
        (return (- o i))
    ))

```
>简单来说，交易告知全网：比特币的持有者已授权把比特币转帐给其他人。而新持有者能够再次授权，转移给该比特币所有权链中的其他人，产生另一笔交易来花掉这些比特币，后面的持有者在花费比特币也是用类似的方式。


### 将交易在全网确认
发一起笔交易，交易信息会被存入交易池(支付更高交易费率的优先存入)，矿工带着交易池中的交易信息进行挖矿，在发现新一个区块的时候，矿工通过比特币的 P2P 网络传输给网络中的某一节点，这一节点会继续再把交易信息传输给它自身连接的其他节点，当信息覆盖全网之后，所有的钱包客户端也就更新了交易的结果。


